<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- 이 페이지의 자료 형식을 지정 -->
    <meta charset="utf-8" />
    
    <!-- HTML 페이지의 제목 -->
    <title>부평감리교회 청년부 22년 이야기</title>

    <!-- 어떤 모니터 혹은 디바이스를 사용하더라도 폭이 각 디바이스 크기에 맞춰 최적화 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    
    <!-- Swipter JS CSS를 API를 통해 불러오기 -->
    <link rel="stylesheet" href="/css/main.css"/>
  </head>

  <body>
    <div data-slide="slide" class="slide">
        <div class="slide-items">
            <img src="/image/00.jpeg" alt="Img 0">
            <img src="/image/01.jpeg" alt="Img 1">
            <img src="/image/02.jpeg" alt="Img 2">
            <img src="/image/03.jpeg" alt="Img 3">
            <img src="/image/04.jpeg" alt="Img 4">
            <img src="/image/05.jpeg" alt="Img 5">
            <img src="/image/06.jpeg" alt="Img 6">
            <img src="/image/07.jpeg" alt="Img 7">
            <img src="/image/08.jpeg" alt="Img 8">
            <img src="/image/09.jpeg" alt="Img 9">
            <img src="/image/10.jpeg" alt="Img 10">
            <img src="/image/11.jpeg" alt="Img 11">
            <img src="/image/12.jpeg" alt="Img 12">
        </div>

        <nav class="slide-nav">
            <div class="slide-thumb"></div>
            <button class="slide-prev">Prev</button>
            <button class="slide-next">Next</button>
        </nav>
      </div>

  </body>

  <script>
    class SlideStories {
    constructor(id) {
        this.slide = document.querySelector(`[data-slide="${id}"]`);
        this.active = 0;
        this.init();
    }

    activeSlide(index) {
        this.active = index;
        this.items.forEach((item) => item.classList.remove('active'));
        this.items[index].classList.add('active');
        this.thumbItems.forEach((item) => item.classList.remove('active'));
        this.thumbItems[index].classList.add('active');
        this.autoSlide();
    }

    prev() {
        if (this.active > 0) {
        this.activeSlide(this.active - 1);
        } else {
        this.activeSlide(0);
        }
    }

    next() {
        if (this.active < this.items.length - 1) {
            this.activeSlide(this.active + 1);
        } else {
            this.activeSlide(this.items.length-1);
            // document.querySelector(".slide-prev").style.display = "none"
            // document.querySelector(".slide-next").style.display = "none"
        }
    }

    addNavigation() {
        const nextBtn = this.slide.querySelector('.slide-next');
        const prevBtn = this.slide.querySelector('.slide-prev');
        nextBtn.addEventListener('click', this.next);
        prevBtn.addEventListener('click', this.prev);
    }

    addThumbItems() {
        this.items.forEach(() => (this.thumb.innerHTML += `<span></span>`));
        this.thumbItems = Array.from(this.thumb.children);
    }

    autoSlide() {
        clearTimeout(this.timeout);
        this.timeout = setTimeout(this.next, 4000);
    }

    init() {
        this.next = this.next.bind(this);
        this.prev = this.prev.bind(this);
        this.items = this.slide.querySelectorAll('.slide-items > *');
        this.thumb = this.slide.querySelector('.slide-thumb');
        this.addThumbItems();
        this.activeSlide(0);
        this.addNavigation();
    }
    }

    new SlideStories('slide');

  </script>

</html>